# GameLoop

The `GameLoop` handles the **main update/render cycle** of a game.

---
## Overview

- Runs in its own thread.  
- Targets a configurable **FPS** (frames per second) and **UPS** (updates per second).  
- Calls `Updatable.update()` on registered objects each tick.  
- Calls `Startable.start()` once at startup.  
- Supports custom `updateCallback` and `renderCallback`.

---
## Fields

- `config` – The loop configuration (LoopConfig)  
- `running` – Boolean flag for loop state  
- `gameThread` – Internal thread  
- `deltaTime` – Time since last frame in seconds  

---
## Methods

```java
GameLoop(LoopConfig config)
```

Creates a new game loop with the given configuration.
### Example

```java
// Create a config
LoopConfig config = new LoopConfig();
config.setTargetFPS(60); // Set FPS
config.setTargetUPS(60); // Set UPS

// Create a new GameLoop using the config
GameLoop loop = new GameLoop(config);
```

---

```java
void start()
```

Starts the loop in a new thread.
### Example

```java
// Configure loop
LoopConfig config = new LoopConfig();
GameLoop loop = new GameLoop(config);

// Add a simple render callback
loop.setRenderCallback(() -> System.out.println("Rendering a frame..."));

// Start the loop in its own thread
loop.start();

// The render callback will now print continuously

```

---

```java
void stop()
```

Stops the loop and waits for the thread to finish.
### Example

```java
// Create a config and loop
LoopConfig config = new LoopConfig();
GameLoop loop = new GameLoop(config);

// Add a callback and start the loop
loop.setUpdateCallback(() -> System.out.println("Updating..."));
loop.start();

// Stop the loop after 3 seconds
new Thread(() -> 
{
    try 
    { 
	    Thread.sleep(3000); 
    } 
    catch (InterruptedException ignored) {}
    loop.stop();
    System.out.println("Loop stopped safely.");
}).start();
```

---

```java
void addStartable(Startable s)
```

Registers a `Startable` object (runs `start()` before loop begins).

### Example

```java
// Example Startable that loads resources before the loop begins
class Player implements Startable
{
    @Override
    public void start()
    {
        System.out.println("Player initialized with assets loaded!");
    }
}

// Create loop and add Player as a Startable
LoopConfig config = new LoopConfig();
GameLoop loop = new GameLoop(config);
loop.addStartable(new Player());

// When loop.start() is called, Player.start() runs first
loop.start();

```

---

```java
void addUpdatable(Updatable u)
```

Registers an `Updatable` object (calls `update()` every tick).
### Example

```java
// Example Updatable for an enemy
class Enemy implements Updatable
{
    private int position = 0;

    @Override
    public void update()
    {
        position += 1; // move enemy right each tick
        System.out.println("Enemy moved to position: " + position);
    }
}

LoopConfig config = new LoopConfig();
GameLoop loop = new GameLoop(config);

// Add an enemy that updates every tick
loop.addUpdatable(new Enemy());
loop.start();
```

---

```java
void setUpdateCallback(Runnable updateCallback)
```

Sets a custom update callback (runs every tick).
### Example

```java
// Create a config and a loop
LoopConfig config = new LoopConfig();
GameLoop loop = new GameLoop(config);

// Use a lambda for custom update logic
loop.setUpdateCallback(() -> 
{
	    System.out.println("Updating game logic at UPS = " +
		    loop.getConfig().getTargetUPS());
});

// Start loop with the update callback
loop.start();

```

---

```java
void setRenderCallback(Runnable renderCallback)
```

Sets a custom render callback (runs once per frame).
### Example

```java
// Create a config and a loop
LoopConfig config = new LoopConfig();
GameLoop loop = new GameLoop(config);

// Render callback to clear the screen and draw a frame
loop.setRenderCallback(() -> 
{
    System.out.println("Drawing frame at FPS = " +
	    loop.getConfig().getTargetFPS());
});

// Start loop with the render callback
loop.start();

```

---

```java
float getDeltaTime()
```

Returns the time elapsed since the last frame (in seconds).
### Example

```java
// Create a config and a loop
LoopConfig config = new LoopConfig();
GameLoop loop = new GameLoop(config);

// Print delta time each update
loop.setUpdateCallback(() -> 
{
    float dt = loop.getDeltaTime();
    System.out.println("Delta time since last frame: " + dt + "s");
});

loop.start();

```

---

```java
LoopConfig getConfig()
```

Returns the current loop configuration.
### Example

```java
// Create a config
LoopConfig config = new LoopConfig();
config.setTargetFPS(144);
config.setWindowWidth(1920);
config.setWindowHeight(1080);

// Create GameLoop using config
GameLoop loop = new GameLoop(config);

// Print config when the game starts
loop.addStartable(() -> 
{
    LoopConfig activeConfig = loop.getConfig();
    System.out.println("Game running at " + activeConfig.getTargetFPS() + " FPS");
    System.out.println("Resolution: " + activeConfig.getWindowWidth() + "x" 
	    + activeConfig.getWindowHeight());
});

loop.start();

```

---

>**Tip: Startable and Updatable in the Same Class**
>
>A single object can implement both `Startable` and `Updatable`.
>
>This is common for game entities (like players, enemies, or systems) that need to:
>	- Run **setup** before the loop begins (via `start()`).
>	- Run **logic updates** each tick (via `update()`).
>
>Example: 
```java
class Player implements Startable, Updatable
{
    private int x = 0;
    
    @Override
    public void start()
    {
        System.out.println("Player initialized at position 0!");
    }

    @Override
    public void update()
    {
        x += 1; // move right each tick
        System.out.println("Player moved to: " + x);
    }
}

LoopConfig config = new LoopConfig();
GameLoop loop = new GameLoop(config);

Player player = new Player();

// Register the same object as both Startable and Updatable
loop.addStartable(player);
loop.addUpdatable(player);

loop.start();
```
>
>In this case, `player.start()` runs once before the loop, and then `player.update()` runs every tick during the loop.